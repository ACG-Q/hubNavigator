# ğŸ·ï¸ ç³»ç»Ÿæ ‡ç­¾ä½“ç³» (Issue Labels Taxonomy)

æœ¬æ–‡æ¡£å®šä¹‰äº†å¯¼èˆªç«™ç³»ç»Ÿä¸­ä½¿ç”¨çš„æ‰€æœ‰ GitHub Issue æ ‡ç­¾ã€‚è¿™äº›æ ‡ç­¾ä¸ä»…ç”¨äºåˆ†ç±»ï¼Œæ›´æ˜¯**è‡ªåŠ¨åŒ–å·¥ä½œæµ (GitHub Actions)** çš„æ ¸å¿ƒè§¦å‘ä¿¡å·ã€‚

---

## 1. çŠ¶æ€æ ‡ç­¾ (Status Labels)

ç”¨äºæ ‡è®°ç«™ç‚¹çš„ç”Ÿå‘½å‘¨æœŸçŠ¶æ€ï¼Œè‡ªåŠ¨åŒ–è„šæœ¬ä¼šæ ¹æ®æ­¤çŠ¶æ€å†³å®šæ˜¯å¦å°†å…¶æ¸²æŸ“åˆ°å‰ç«¯ã€‚

| æ ‡ç­¾å | é¢œè‰² | å«ä¹‰ | è‡ªåŠ¨åŒ–è¡Œä¸º |
|:---|:---|:---|:---|
| `status:active` | `0e8a16` (Green) | **æ­£å¸¸è¿è¡Œ** | âœ… æ”¶å½•è¿› `site_all.json`ï¼Œå‰ç«¯å¯è§ã€‚å‚ä¸å¸¸è§„å·¡æ£€ã€‚ |
| `status:warning` | `fbca04` (Yellow) | **è®¿é—®å¼‚å¸¸** | âš ï¸ å‰ç«¯å¯è§ï¼Œä½†ä¼šæœ‰"è¿æ¥ä¸ç¨³å®š"æç¤ºã€‚è¿›å…¥**é«˜é¢‘å¤æ£€é˜Ÿåˆ—**ã€‚ |
| `status:broken` | `d93f0b` (Red) | **å·²å¤±æ•ˆ** | âŒ ä»å‰ç«¯ç§»é™¤ã€‚è¿ç»­ 3 æ¬¡å·¡æ£€å¤±è´¥è‡ªåŠ¨æ‰“æ ‡ã€‚ |
| `status:duplicate` | `cfd3d7` (Grey) | **é‡å¤æäº¤** | ğŸš« æ£€æµ‹åˆ° URL å·²å­˜åœ¨æ—¶è‡ªåŠ¨æ‰“æ ‡å¹¶å…³é—­ã€‚ |
| `triage` | `ededed` (Grey) | **å¾…å®¡æ ¸** | â³ æ–°æäº¤çš„ Issue é»˜è®¤çŠ¶æ€ã€‚ç­‰å¾…ç®¡ç†å‘˜ `/approve` æˆ– `/merge`ã€‚ |

**çŠ¶æ€è½¬æ¢è§„åˆ™**ï¼š
- `triage` â†’ `active`ï¼šç®¡ç†å‘˜æ‰§è¡Œ `/approve` å‘½ä»¤
- `active` â†’ `warning`ï¼šå¥åº·æ£€æŸ¥å¤±è´¥ 1-2 æ¬¡
- `warning` â†’ `broken`ï¼šè¿ç»­å¤±è´¥ 3 æ¬¡
- `warning` â†’ `active`ï¼šå¥åº·æ£€æŸ¥æ¢å¤æ­£å¸¸
- `broken` â†’ `active`ï¼šç®¡ç†å‘˜æ‰‹åŠ¨ä¿®å¤åæ‰§è¡Œ `/approve`

---

## 2. ç±»å‹æ ‡ç­¾ (Kind Labels)

ç”¨äºåŒºåˆ† Issue çš„ç”¨é€”å’Œå¤„ç†æµç¨‹ã€‚

| æ ‡ç­¾å | é¢œè‰² | å«ä¹‰ | å¤„ç†æµç¨‹ |
|:---|:---|:---|:---|
| `kind:site` | `1d76db` (Blue) | **æ–°ç«™ç‚¹æäº¤** | Issue Parser â†’ ç”Ÿæˆ JSON â†’ å¥åº·æ£€æŸ¥ â†’ è‡ªåŠ¨ä¸Šçº¿ |
| `kind:correction` | `5319e7` (Purple) | **ç«™ç‚¹ä¿®æ­£** | Issue Parser â†’ æ ‡è®° triage â†’ ç®¡ç†å‘˜ `/merge` â†’ æ›´æ–°ç›®æ ‡ç«™ç‚¹ |
| `kind:domain-migration` | `e99695` (Pink) | **åŸŸåè¿ç§»** | Issue Parser â†’ æ ‡è®° triage â†’ ç®¡ç†å‘˜ `/merge` â†’ æ›´æ–° URL |
| `kind:new-category` | `c2e0c6` (Light Green) | **æ–°å¢åˆ†ç±»ç”³è¯·** | ç®¡ç†å‘˜è§¦å‘ OPS å·¥ä½œæµ â†’ æ›´æ–°é…ç½® â†’ åŒæ­¥æ¨¡æ¿ |

**æ ‡ç­¾è‡ªåŠ¨æ·»åŠ **ï¼š
- æ‰€æœ‰æ ‡ç­¾ç”± Issue æ¨¡æ¿çš„ `labels` å­—æ®µè‡ªåŠ¨æ·»åŠ 
- ä¸éœ€è¦æ‰‹åŠ¨æ‰“æ ‡

---

## 3. è‡ªåŠ¨åŒ–å·¥ä½œæµè§¦å‘

### 3.1 Issue Parser è§¦å‘æ¡ä»¶

```yaml
on:
  issues:
    types: [opened, edited, reopened, closed]

if: contains(github.event.issue.labels.*.name, 'kind:site') || 
    contains(github.event.issue.labels.*.name, 'kind:domain-migration') || 
    contains(github.event.issue.labels.*.name, 'kind:correction') ||
    contains(github.event.issue.labels.*.name, 'kind:new-category')
```

### 3.2 Health Check å¤„ç†èŒƒå›´

```python
issues = repo.get_issues(state='open', labels=['kind:site'])
```

ä»…æ£€æŸ¥ `kind:site` ç±»å‹çš„ Issueï¼Œä¿®æ­£å’Œè¿ç§»ä¸å‚ä¸å¥åº·æ£€æŸ¥ã€‚

---

## 4. æ ‡ç­¾ç®¡ç†

### 4.1 åˆå§‹åŒ–æ ‡ç­¾

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆå§‹åŒ–ä»“åº“çš„æ ‡å‡†æ ‡ç­¾ï¼š

```bash
# æ‰‹åŠ¨è§¦å‘ Init Labels å·¥ä½œæµ
# æˆ–åœ¨æœ¬åœ°è¿è¡Œï¼š
python scripts/manage_labels.py
```

### 4.2 æ ‡ç­¾é…ç½®æ–‡ä»¶

æ ‡ç­¾å®šä¹‰åœ¨ `scripts/manage_labels.py` ä¸­ï¼š

```python
PROJECT_LABELS = {
    "status:active": {
        "color": "0e8a16", 
        "desc": "Verified and active site | å·²éªŒè¯ä¸”æ­£å¸¸è¿è¡Œçš„ç«™ç‚¹"
    },
    # ... å…¶ä»–æ ‡ç­¾
}
```

### 4.3 æ¸…ç†éæ ‡å‡†æ ‡ç­¾

`manage_labels.py` ä¼šè‡ªåŠ¨åˆ é™¤æ‰€æœ‰ä¸åœ¨ `PROJECT_LABELS` ä¸­çš„æ ‡ç­¾ï¼Œç¡®ä¿æ ‡ç­¾ç³»ç»Ÿçš„ä¸€è‡´æ€§ã€‚

---

## 5. ChatOps å‘½ä»¤ä¸æ ‡ç­¾

éƒ¨åˆ† ChatOps å‘½ä»¤ä¼šè‡ªåŠ¨ç®¡ç†æ ‡ç­¾ï¼š

| å‘½ä»¤ | æ ‡ç­¾å˜åŒ– |
|:---|:---|
| `/approve` | ç§»é™¤ `triage`ï¼Œæ·»åŠ  `status:active` |
| `/merge` | ä¿®æ­£/è¿ç§» Issueï¼šæ·»åŠ  `status:active` å¹¶å…³é—­ |
| `/label <labels>` | æ‰¹é‡æ·»åŠ æŒ‡å®šæ ‡ç­¾ |

è¯¦ç»†è¯´æ˜è§ [`chatops_commands.md`](./chatops_commands.md)

---

## 6. æ ‡ç­¾ä½¿ç”¨æœ€ä½³å®è·µ

### 6.1 æ–°ç«™ç‚¹æäº¤
- âœ… è‡ªåŠ¨æ·»åŠ ï¼š`kind:site`ã€`triage`
- âœ… å®¡æ ¸é€šè¿‡åï¼šç§»é™¤ `triage`ï¼Œæ·»åŠ  `status:active`
- âœ… å¥åº·æ£€æŸ¥ï¼šæ ¹æ®ç»“æœè‡ªåŠ¨åˆ‡æ¢ `active`/`warning`/`broken`

### 6.2 ç«™ç‚¹ä¿®æ­£
- âœ… è‡ªåŠ¨æ·»åŠ ï¼š`kind:correction`ã€`triage`
- âœ… åˆå¹¶åï¼šæ·»åŠ  `status:active` å¹¶å…³é—­ Issue
- âŒ ä¸è¦æ‰‹åŠ¨ä¿®æ”¹ç›®æ ‡ç«™ç‚¹çš„æ ‡ç­¾

### 6.3 åŸŸåè¿ç§»
- âœ… è‡ªåŠ¨æ·»åŠ ï¼š`kind:domain-migration`ã€`triage`
- âœ… åˆå¹¶åï¼šæ·»åŠ  `status:active` å¹¶å…³é—­ Issue
- âœ… ç›®æ ‡ç«™ç‚¹ä¼šè‡ªåŠ¨é‡æ–°æ£€æŸ¥æ–°åŸŸå

### 6.4 åˆ†ç±»ç”³è¯·
- âœ… è‡ªåŠ¨æ·»åŠ ï¼š`kind:new-category`ã€`triage`
- âœ… æ‰¹å‡†åï¼šæ·»åŠ  `status:active` å¹¶å…³é—­ Issue
- âœ… é…ç½®æ–‡ä»¶å’Œæ¨¡æ¿ä¼šè‡ªåŠ¨æ›´æ–°

---

## 7. æ ‡ç­¾é¢œè‰²è§„èŒƒ

| é¢œè‰²ç³» | ç”¨é€” | ç¤ºä¾‹ |
|:---|:---|:---|
| **ç»¿è‰²ç³»** (`0e8a16`, `c2e0c6`) | æ­£å¸¸/æˆåŠŸçŠ¶æ€ | `status:active` |
| **é»„è‰²ç³»** (`fbca04`) | è­¦å‘ŠçŠ¶æ€ | `status:warning` |
| **çº¢è‰²ç³»** (`d93f0b`, `e99695`) | é”™è¯¯/è¿ç§» | `status:broken`, `kind:domain-migration` |
| **è“è‰²ç³»** (`1d76db`) | å¸¸è§„æ“ä½œ | `kind:site` |
| **ç´«è‰²ç³»** (`5319e7`) | ä¿®æ­£æ“ä½œ | `kind:correction` |
| **ç°è‰²ç³»** (`ededed`, `cfd3d7`) | å¾…å¤„ç†/é‡å¤ | `triage`, `status:duplicate` |

---

## 8. æ•…éšœæ’æŸ¥

### é—®é¢˜ï¼šIssue æœªè¢«è‡ªåŠ¨å¤„ç†
**æ£€æŸ¥æ¸…å•**ï¼š
1. ç¡®è®¤ Issue åŒ…å«æ­£ç¡®çš„ `kind:*` æ ‡ç­¾
2. æŸ¥çœ‹ Actions æ—¥å¿—ç¡®è®¤å·¥ä½œæµæ˜¯å¦è§¦å‘
3. æ£€æŸ¥ Issue å†…å®¹æ ¼å¼æ˜¯å¦ç¬¦åˆæ¨¡æ¿è¦æ±‚

### é—®é¢˜ï¼šæ ‡ç­¾çŠ¶æ€ä¸ä¸€è‡´
**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ‰‹åŠ¨è§¦å‘ `Init Labels` å·¥ä½œæµ
2. æˆ–è¿è¡Œ `python scripts/manage_labels.py`
3. æ£€æŸ¥ `PROJECT_LABELS` é…ç½®æ˜¯å¦å®Œæ•´

### é—®é¢˜ï¼šå¥åº·æ£€æŸ¥åæ ‡ç­¾æœªæ›´æ–°
**æ£€æŸ¥æ¸…å•**ï¼š
1. ç¡®è®¤ Issue åŒ…å« `kind:site` æ ‡ç­¾
2. æŸ¥çœ‹ `health_check.py` æ—¥å¿—
3. æ£€æŸ¥ `sync_labels()` å‡½æ•°æ˜¯å¦æ­£å¸¸æ‰§è¡Œ

---

## 9. ç›¸å…³æ–‡æ¡£

- [ChatOps å‘½ä»¤æ‰‹å†Œ](./chatops_commands.md)
- [è‡ªåŠ¨åŒ–å·¥ä½œæµè¯´æ˜](./automation_workflows.md)
- [ç½‘ç«™åˆ†ç±»æ ‡å‡†](./site_categories.md)
