# ğŸ¤– è‡ªåŠ¨åŒ–å·¥ä½œæµè¯´æ˜ (Automation Workflows)

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜äº† HubNavigator é¡¹ç›®ä¸­æ‰€æœ‰è‡ªåŠ¨åŒ–å·¥ä½œæµçš„è§¦å‘æ¡ä»¶ã€æ‰§è¡Œé€»è¾‘å’Œæ•°æ®æµè½¬ã€‚

---

## å·¥ä½œæµæ¦‚è§ˆ

| å·¥ä½œæµåç§° | æ–‡ä»¶è·¯å¾„ | è§¦å‘æ–¹å¼ | ä¸»è¦åŠŸèƒ½ |
|:---|:---|:---|:---|
| **Automation Core** | `.github/workflows/automation_core.yml` | å®šæ—¶ / æ‰‹åŠ¨ / Push | æ•°æ®è§£æã€å¥åº·æ£€æŸ¥ã€æ•°æ®èšåˆä¸ Sitemap ç”Ÿæˆ |
| **ChatOps** | `.github/workflows/chatops.yml` | Issue è¯„è®º (`/`) | å¤„ç†ç®¡ç†å‘˜æŒ‡ä»¤ï¼ˆæ‰¹å‡†ã€æ‹’ç»ã€å…³é—­ï¼‰ |
| **Deploy to Pages** | `.github/workflows/deploy.yml` | å®šæ—¶ / æ‰‹åŠ¨ | æ„å»º Vue åº”ç”¨å¹¶ç”Ÿæˆé™æ€é¡µé¢ |
| **Weekly Backup** | `.github/workflows/backup.yml` | å®šæ—¶ / æ‰‹åŠ¨ | å¤‡ä»½æ•°æ®ç›®å½•åˆ°ç‹¬ç«‹åˆ†æ”¯ |
| **System Init** | `.github/workflows/init.yml` | æ‰‹åŠ¨è§¦å‘ | åˆå§‹åŒ–ç³»ç»Ÿé…ç½®å’ŒåŸºç¡€æ•°æ® |

---

## 1. Automation Core (æ ¸å¿ƒè‡ªåŠ¨åŒ–)

è¿™æ˜¯ç³»ç»Ÿçš„ä¸»å¼•æ“ï¼Œè´Ÿè´£ç»´æŠ¤æ•°æ®çš„å‡†ç¡®æ€§å’Œå®æ—¶æ€§ã€‚

### è§¦å‘æ¡ä»¶
- æ¯ 30 åˆ†é’Ÿå®šæ—¶è¿è¡Œã€‚
- `data/items/` ç›®å½•ä¸‹çš„ JSON æ–‡ä»¶å‘ç”Ÿå˜æ›´æ—¶è§¦å‘ã€‚
- æ‰‹åŠ¨è§¦å‘ã€‚

### æ‰§è¡Œæµç¨‹
1. **æ•°æ®åˆå§‹åŒ– (`init.js`)**: è§£ææ‰€æœ‰æ‰“å¼€çš„ Issueï¼ŒåŒæ­¥ Front Matter åˆ°æœ¬åœ° JSONã€‚
2. **å¥åº·æ£€æŸ¥ (`health.js`)**: é€ä¸ªéªŒè¯ç«™ç‚¹å¯ç”¨æ€§ï¼Œæ›´æ–° `status` (active/warning/broken)ã€‚
3. **æ•°æ®èšåˆ (`aggregate.js`)**: å°†åˆ†æ•£çš„ JSON æ–‡ä»¶èšåˆæˆ `site_all.json` å’Œ `category_all.json`ã€‚
4. **ç”Ÿæˆ Sitemap (`ssg.js`)**: æ›´æ–°ç«™ç‚¹åœ°å›¾ä»¥ååŠ© SEOã€‚

```mermaid
graph TD
    A[è§¦å‘å™¨] --> B[init.js: è§£æ Issue]
    B --> C[health.js: ç«™ç‚¹å·¡æ£€]
    C --> D[aggregate.js: æ•°æ®èšåˆ]
    D --> E[ssg.js: é™æ€é¡µé¢ä¸ SEO]
    E --> F[è‡ªåŠ¨æäº¤å¹¶æ¨é€æ›´æ”¹]
```

---

## 2. ChatOps (è¯„è®ºå‘½ä»¤)

ç®¡ç†å‘˜é€šè¿‡ Issue è¯„è®ºç›´æ¥æ§åˆ¶ç³»ç»Ÿè¡Œä¸ºã€‚

### è§¦å‘æ¡ä»¶
- Issue è¯„è®ºåˆ›å»ºã€‚
- è¯„è®ºå†…å®¹ä»¥ `/` å¼€å¤´ã€‚

### æ‰§è¡Œé€»è¾‘
ç”± `automation/chatops.js` å¤„ç†ï¼Œæ”¯æŒä»¥ä¸‹æ ¸å¿ƒæŒ‡ä»¤ï¼š
- **/approve**: æ ¹æ® Issue ç±»å‹æ‰§è¡Œæ‰¹å‡†é€»è¾‘ï¼ˆä¸Šçº¿ç«™ç‚¹ã€æ·»åŠ åˆ†ç±»ã€åˆå¹¶æ›´æ­£ï¼‰ã€‚
- **/reject**: æ‹’ç»ç”³è¯·å¹¶æ¸…ç†ä¸´æ—¶æ•°æ®ã€‚
- **/close**: å…³é—­ Issue å¹¶æŒ‰éœ€ç§»é™¤ç«™ç‚¹ã€‚

```mermaid
graph LR
    A[ç®¡ç†å‘˜è¯„è®º /approve] --> B[chatops.js]
    B --> C{è¯†åˆ« Issue ç±»å‹}
    C -->|kind:site| D[æ¿€æ´»ç«™ç‚¹å¹¶ä¸Šçº¿]
    C -->|site:correction| E[åˆå¹¶ä¿®æ­£æ•°æ®]
    C -->|kind:category| F[åº”ç”¨æ–°åˆ†ç±»é…ç½®]
```

---

## 3. æ•°æ®ç”Ÿå‘½å‘¨æœŸ

1. **æäº¤**: ç”¨æˆ·æäº¤ Issueï¼Œç³»ç»Ÿè‡ªåŠ¨æ·»åŠ  `triage` æ ‡ç­¾ã€‚
2. **é¢„è§ˆ**: `automation_core.yml` æ•è·æ–° Issueï¼Œç”Ÿæˆä¸´æ—¶ JSONï¼Œæ•°æ®å‡ºç°åœ¨é¢„è§ˆ/æµ‹è¯•ç¯å¢ƒã€‚
3. **å®¡æ ¸**: ç®¡ç†å‘˜è¯„è®º `/approve`ã€‚
4. **ä¸Šçº¿**: æ ‡ç­¾å˜æ›´ä¸º `status:active`ï¼Œç«™ç‚¹æ­£å¼è¿›å…¥ç”Ÿäº§ç¯å¢ƒæ•°æ®æµã€‚
5. **ç»´æŠ¤**: `health.js` å®šæœŸå·¡æ£€ï¼Œè‡ªåŠ¨åˆ‡æ¢å¯ç”¨æ€§çŠ¶æ€ã€‚
6. **ä¸‹çº¿**: Issue å…³é—­ï¼Œå¯¹åº” JSON ç‰©ç†åˆ é™¤ï¼Œç«™ç‚¹ä»å…¨ç«™æ•°æ®ä¸­ç§»é™¤ã€‚

---

## 4. æŠ€æœ¯æ ˆ

- **Runtime**: Node.js (Latest)
- **API**: GitHub REST API (via `octokit`)
- **Data**: JSON (Stored in `data/`)
- **CI/CD**: GitHub Actions

---

## ç›¸å…³æ–‡æ¡£

- [ChatOps å‘½ä»¤æ‰‹å†Œ](./chatops_commands.md)
- [æ ‡ç­¾ä½“ç³»è¯´æ˜](./issue_labels.md)
- [å¼€å‘ç¯å¢ƒé…ç½®](./development.md)
